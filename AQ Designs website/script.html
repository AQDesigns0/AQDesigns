// Category Filter Script
const categoryButtons = document.querySelectorAll('.category-btn');
const tiles = document.querySelectorAll('.tile');

categoryButtons.forEach(button => {
  button.addEventListener('click', () => {
    categoryButtons.forEach(btn => btn.classList.remove('active'));
    button.classList.add('active');

    const category = button.getAttribute('data-category');

    tiles.forEach(tile => {
      if (category === 'all' || tile.getAttribute('data-category') === category) {
        tile.style.display = 'flex';
      } else {
        tile.style.display = 'none';
      }
    });
  });
});

// Sorting Script
const sortSelect = document.getElementById('sortSelect');
const productTilesContainer = document.getElementById('productTiles');

sortSelect.addEventListener('change', () => {
  const sortValue = sortSelect.value;
  const tilesArray = Array.from(productTilesContainer.children);

  function getPrice(tile) {
    const priceText = tile.querySelector('.price').textContent;
    return Number(priceText.replace(/[^0-9]/g, ''));
  }

  function getAttr(tile, attr) {
    return tile.getAttribute(attr) || '';
  }

  if (sortValue === 'price-asc') {
    tilesArray.sort((a, b) => getPrice(a) - getPrice(b));
  } else if (sortValue === 'price-desc') {
    tilesArray.sort((a, b) => getPrice(b) - getPrice(a));
  } else if (sortValue === 'newest') {
    tilesArray.sort((a, b) => getAttr(b, 'data-newest').localeCompare(getAttr(a, 'data-newest')));
  } else if (sortValue === 'popularity') {
    tilesArray.sort((a, b) => getAttr(b, 'data-popularity') - getAttr(a, 'data-popularity'));
  } else {
    tilesArray.sort((a, b) => a.querySelector('h3').textContent.localeCompare(b.querySelector('h3').textContent));
  }

  tilesArray.forEach(tile => productTilesContainer.appendChild(tile));
});
// Modal Elements
const modal = document.getElementById('productModal');
const modalTitle = document.getElementById('modalTitle');
const modalDescription = document.getElementById('modalDescription');
const modalPrice = document.getElementById('modalPrice');
const modalOrderBtn = document.getElementById('modalOrderBtn');
const modalImagesContainer = modal.querySelector('.modal-images');
const closeBtn = modal.querySelector('.close-btn');

// Function to open modal with product data
function openModal(tile) {
  const title = tile.querySelector('h3').textContent;
  const description = tile.querySelector('p').textContent;
  const price = tile.querySelector('.price').textContent;
  const orderHref = tile.querySelector('a.btn').href;

  modalTitle.textContent = title;
  modalDescription.textContent = description;
  modalPrice.textContent = price;
  modalOrderBtn.href = orderHref;

  // For demo, use same placeholder image multiple times, you can replace with real images URLs
  modalImagesContainer.innerHTML = '';
  for(let i=0; i<3; i++) {
    const img = document.createElement('img');
    img.src = 'https://via.placeholder.com/150?text=' + encodeURIComponent(title + ' Image ' + (i+1));
    img.alt = title + ' image ' + (i+1);
    modalImagesContainer.appendChild(img);
  }

  modal.style.display = 'block';
}

// Close modal function
function closeModal() {
  modal.style.display = 'none';
}

// Event listeners
closeBtn.addEventListener('click', closeModal);
window.addEventListener('click', (e) => {
  if (e.target === modal) {
    closeModal();
  }
});

// Open modal on product tile click
tiles.forEach(tile => {
  tile.addEventListener('click', (e) => {
    // Avoid triggering when clicking the order button inside tile
    if (!e.target.classList.contains('btn')) {
      openModal(tile);
    }
  });
});
